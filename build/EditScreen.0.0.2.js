"use strict";(self.webpackChunkphoto_block=self.webpackChunkphoto_block||[]).push([[296],{4280:function(e,t,o){o.d(t,{Z:function(){return f}});var n=o(5609),r=(o(6483),o(9307)),a=o(5736),l=o(4184),i=o.n(l),c=o(4797);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}o(1552);var p=function(e){var t=e.filter,o=e.label,a=e.isSelected,l=e.fullUrl,s=e.imageDimensions;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}((0,r.useContext)(c.Z));var p=u((0,r.useState)(null),2),h=p[0],d=p[1],f=u((0,r.useState)(!1),2),b=f[0],m=f[1];return React.createElement(React.Fragment,null,React.createElement(n.Button,{variant:a?"primary":"secondary",onClick:function(){return e.onClick(t)},onMouseEnter:function(){return m(!0),void h.focus()},onMouseLeave:function(){m(!1)},ref:d},o),b&&React.createElement(n.Popover,{className:"dlx-photo-block__css-gram-image-popover",placement:"left-start",anchor:h,onClose:function(){m(!1)},offset:10,noArrow:!1},React.createElement("div",{className:"dlx-photo-block__css-gram-image-popover-wrapper"},React.createElement("img",{src:l,className:i()("photo-block-".concat(t),{"has-css-gram":"none"!==t}),width:s.width,height:s.height,alt:""}))))};function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var d=[{value:"none",label:(0,a.__)("None","photo-block")},{value:"1977",label:(0,a.__)("1977","photo-block")},{value:"aden",label:(0,a.__)("Aden","photo-block")},{value:"brannan",label:(0,a.__)("Brannan","photo-block")},{value:"brooklyn",label:(0,a.__)("Brooklyn","photo-block")},{value:"clarendon",label:(0,a.__)("Clarendon","photo-block")},{value:"earlybird",label:(0,a.__)("Earlybird","photo-block")},{value:"gingham",label:(0,a.__)("Gingham","photo-block")},{value:"hudson",label:(0,a.__)("Hudson","photo-block")},{value:"inkwell",label:(0,a.__)("Inkwell","photo-block")},{value:"kelvin",label:(0,a.__)("Kelvin","photo-block")},{value:"lark",label:(0,a.__)("Lark","photo-block")},{value:"lofi",label:(0,a.__)("Lo-Fi","photo-block")},{value:"maven",label:(0,a.__)("Maven","photo-block")},{value:"mayfair",label:(0,a.__)("Mayfair","photo-block")},{value:"moon",label:(0,a.__)("Moon","photo-block")},{value:"nashville",label:(0,a.__)("Nashville","photo-block")},{value:"perpetua",label:(0,a.__)("Perpetua","photo-block")},{value:"reyes",label:(0,a.__)("Reyes","photo-block")},{value:"rise",label:(0,a.__)("Rise","photo-block")},{value:"slumber",label:(0,a.__)("Slumber","photo-block")},{value:"stinson",label:(0,a.__)("Stinson","photo-block")},{value:"toaster",label:(0,a.__)("Toaster","photo-block")},{value:"valencia",label:(0,a.__)("Valencia","photo-block")},{value:"walden",label:(0,a.__)("Walden","photo-block")},{value:"willow",label:(0,a.__)("Willow","photo-block")},{value:"xpro2",label:(0,a.__)("X-Pro II","photo-block")}],f=function(e){var t,o,l=e.attributes,i=e.setAttributes,u=(l.photo,l.imageDimensions),s=(0,r.useContext)(c.Z).imageFile,f=(t=(0,r.useState)("none"),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(t,o)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=f[0],m=f[1];return React.createElement(React.Fragment,null,React.createElement(n.BaseControl,{className:"dlx-photo-block__css-gram-button-group"},React.createElement("h3",null,(0,a.__)("Select a CSS Filter","photo-block")),React.createElement(n.ButtonGroup,null,d.map((function(e){return React.createElement(p,{key:e.value,isSelected:b===e.value,onClick:function(){i({cssGramFilter:e.value}),m(e.value)},label:e.label,filter:e.value,fullUrl:s.url,imageDimensions:u})})))))}},1542:function(e,t,o){var n=o(5609),r=(o(6483),o(9307)),a=o(5736),l=(o(4184),o(4797)),i=o(1552);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){p(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}t.Z=function(e){var t=e.attributes,o=e.setAttributes;return e.anchorRef,function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}((0,r.useContext)(l.Z)),t.mediaLinkType,t.mediaLinkTitle,t.mediaLinkUrl,React.createElement(React.Fragment,null,React.createElement(n.BaseControl,{className:"dlx-photo-block__drop-shadow-control"},React.createElement("h3",{className:"dlx-photo-block__drop-shadow-control__title"},(0,a.__)("Drop Shadow","photo-block")),React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings"},React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__color"},React.createElement(i.Z,{label:(0,a.__)("Color","photo-block"),value:t.photoDropShadow.color,valueOpacity:1,onChange:function(e,n){o({photoDropShadow:s(s({},t.photoDropShadow),{},{color:n})})},onOpacityChange:function(e){o({photoDropShadow:s(s({},t.photoDropShadow),{},{opacity:e})})},slug:"photoDropShadow",defaultColors:photoBlock.palette,defaultColor:"#000000",alpha:!0})),React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__offset"},React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__offset__wrapper"},React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__offset__x"},React.createElement(n.TextControl,{label:(0,a.__)("X Offset","photo-block"),value:t.photoDropShadow.horizontal,type:"number",onChange:function(e){o({photoDropShadow:s(s({},t.photoDropShadow),{},{horizontal:e})})}})),React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__offset__y"},React.createElement(n.TextControl,{label:(0,a.__)("Y Offset","photo-block"),value:t.photoDropShadow.vertical,type:"number",onChange:function(e){o({photoDropShadow:s(s({},t.photoDropShadow),{},{vertical:e})})}})))),React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__blur"},React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__blur__wrapper"},React.createElement(n.RangeControl,{label:(0,a.__)("Blur","photo-block"),value:t.photoDropShadow.blur,onChange:function(e){o({photoDropShadow:s(s({},t.photoDropShadow),{},{blur:e})})},min:0,max:100,step:1}))),React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__spread"},React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__spread__wrapper"},React.createElement(n.RangeControl,{label:(0,a.__)("Spread","photo-block"),value:t.photoDropShadow.spread,onChange:function(e){o({photoDropShadow:s(s({},t.photoDropShadow),{},{spread:e})})},min:-25,max:25,step:1}))),React.createElement("div",{className:"dlx-photo-block__drop-shadow-control__settings__inset"},React.createElement(n.ToggleControl,{label:(0,a.__)("Inset","photo-block"),checked:t.photoDropShadow.inset,onChange:function(e){o({photoDropShadow:s(s({},t.photoDropShadow),{},{inset:e})})}})))))}},6974:function(e,t,o){o.d(t,{Z:function(){return D}});var n=o(5609),r=o(6483),a=o(6472);const l=(0,a.Z)("Link2Off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var i=o(5283);const c=(0,a.Z)("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);var u=o(7235);const s=(0,a.Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);var p=o(9307),h=o(5736),d=o(4184),f=o.n(d),b=o(4797),m=o(9196),v=o.n(m),y=o(5697),g=o.n(y),_=o(9630),k=o(5158),E=o(4333),w=o(2027),S=o(7764),R=o(9035),O=o(3766),x=o(9194),C=o(802);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function j(){j=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,n=Object.defineProperty||function(e,t,o){e[t]=o.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,o){return e[t]=o}}function u(e,t,o,r){var a=t&&t.prototype instanceof h?t:h,l=Object.create(a.prototype),i=new R(r||[]);return n(l,"_invoke",{value:k(e,o,i)}),l}function s(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function h(){}function d(){}function f(){}var b={};c(b,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(O([])));v&&v!==t&&o.call(v,a)&&(b=v);var y=f.prototype=h.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(n,a,l,i){var c=s(e[n],e,a);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==P(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,l,i)}),(function(e){r("throw",e,l,i)})):t.resolve(p).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,i)}))}i(c.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function k(e,t,o){var n="suspendedStart";return function(r,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw a;return{value:void 0,done:!0}}for(o.method=r,o.arg=a;;){var l=o.delegate;if(l){var i=E(l,o);if(i){if(i===p)continue;return i}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===n)throw n="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n="executing";var c=s(e,t,o);if("normal"===c.type){if(n=o.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(n="completed",o.method="throw",o.arg=c.arg)}}}function E(e,t){var o=t.method,n=e.iterator[o];if(void 0===n)return t.delegate=null,"throw"===o&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==o&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),p;var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=f,n(y,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(_.prototype),c(_.prototype,l,(function(){return this})),e.AsyncIterator=_,e.async=function(t,o,n,r,a){void 0===a&&(a=Promise);var l=new _(u(t,o,n,r),a);return e.isGeneratorFunction(o)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),o=[];for(var n in t)o.push(n);return o.reverse(),function e(){for(;o.length;){var n=o.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(o,n){return l.type="throw",l.arg=e,t.next=o,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(i&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),S(o),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var r=n.arg;S(o)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:O(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=void 0),p}},e}function A(e,t,o,n,r,a,l){try{var i=e[a](l),c=i.value}catch(e){return void o(e)}i.done?t(c):Promise.resolve(c).then(n,r)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var I=function e(t){var o=(0,m.createRef)(),a=t.restEndpoint,l=t.restNonce,i=(0,E.useInstanceId)(e,"app"),c=N((0,m.useState)([]),2),u=c[0],p=c[1],d=N((0,m.useState)(!1),2),b=d[0],y=d[1],g=N((0,m.useState)(!1),2),P=(g[0],g[1]),T=N((0,m.useState)(null),2),I=T[0],L=T[1],D=N((0,m.useState)(null),2),B=D[0],M=D[1],Z=N((0,m.useState)(null),2),F=Z[0],q=Z[1],z=N((0,m.useState)(null),2),U=z[0],H=z[1],G=N((0,m.useState)(""),2),W=G[0],V=(G[1],N((0,m.useState)(""),2)),$=V[0],Q=V[1],J=N((0,m.useState)(t.savedValue),2),Y=J[0],K=J[1],X=N((0,m.useState)("url-input-control-".concat(i)),2),ee=X[0],te=(X[1],N((0,m.useState)(!1),2)),oe=te[0],ne=te[1],re=(0,E.useDebounce)((function(e){ae(e)}),200);(0,m.useEffect)((function(){if(""!==Y){Q(Y);var e={permalink:Y,label:(0,r.filterURLForDisplay)(Y),slug:"",value:""};return K(""),void q(e)}""!==$&&re($)}),[$]),(0,m.useEffect)((function(){o.current&&t.hasInititialFocus&&o.current.focus()}),[o]);var ae=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=!(null!==(e=t)&&void 0!==e&&e.length);if(t=(t=t.toString()).trim(),(0,r.isURL)(t))return p([]),y(!1),void ne(!1);if(!o&&t.length<2)return p([]),y(!1),void ne(!1);P(!0),M(null),ne(!0);var n,i=new AbortController;null!==I&&I.abort(),L(i),(n=j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(!0),e.next=4,(0,C.Z)(l,{signal:i.signal,search:encodeURIComponent(t)},a,"POST").then((function(e){L(null);var t=e.data.data;p(t),y(!0)})).catch((function(e){})).then((function(){ne(!1)}));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var e=this,t=arguments;return new Promise((function(o,r){var a=n.apply(e,t);function l(e){A(a,o,r,l,i,"next",e)}function i(e){A(a,o,r,l,i,"throw",e)}l(void 0)}))})()};return v().createElement("div",{className:"photo-block-url-input"},v().createElement("div",{className:"photo-block-pub-url-input__wrapper"},v().createElement("div",{className:"photo-block-pub-url-input__input-wrapper"},null!==F&&v().createElement("div",{className:"photo-block-pub-url-input__suggestion"},v().createElement("div",{className:"photo-block-pub-url-input__suggestion-item"},v().createElement("span",{className:"photo-block-pub-url-input__suggestion-label"},v().createElement(n.Button,{variant:"link",icon:v().createElement(s,null),iconSize:18,iconPosition:"right",label:(0,h.__)("Open in new tab","photo-block"),href:F.permalink,target:"_blank",rel:"noopener noreferrer"},(0,r.filterURLForDisplay)(F.permalink))),v().createElement(n.Button,{variant:"secondary",icon:v().createElement(w.Z,null),iconSize:18,label:(0,h.__)("Remove Current Selection","photo-block"),onClick:function(){q(null)}}))),null===F&&v().createElement("div",{className:"photo-block-pub-url-search-wrapper"},v().createElement("input",{type:"text",placeholder:(0,h.__)("Paste in URL or search","photo-block"),id:ee,className:"photo-block-pub-url-input__input",value:$,onChange:function(e){Q(e.target.value)},onFocus:function(e){e.preventDefault(),null!==B||""===$||(0,r.isURL)($)||re($)},onKeyDown:function(e){if(!b&&!u.length||oe){switch(e.keyCode){case _.UP:0!==e.target.selectionStart&&(e.preventDefault(),e.target.setSelectionRange(0,0));break;case _.DOWN:$!==e.target.selectionStart&&(e.preventDefault(),e.target.setSelectionRange($.length,$.length));break;case _.ENTER:e.preventDefault(),re(e.target.value)}return null}switch(e.keyCode){case _.UP:e.preventDefault();var n=U?U-1:u.length-1;H(n),M(u[n].value);break;case _.DOWN:if(e.preventDefault(),!b&&u.length>0)return y(!0),H(0),void M(u[0].value);var r=null===B||U===u.length-1?0:U+1;H(r),M(u[r].value);break;case _.TAB:null!==B&&(0,k.speak)((0,h.__)("Link selected.","photo-block"));break;case _.ENTER:e.preventDefault(),y(!1),null!==B&&(t.onItemSelect(e,(a=B,null==(l=u.find((function(e){return e.value===a})))?null:l)),o.current.focus())}var a,l},"aria-label":t.label?void 0:(0,h.__)("Page","photo-block"),"aria-autocomplete":"list",ref:o}),oe&&v().createElement("div",{className:"photo-block-pub-url-input__loading"},v().createElement(n.Spinner,null)),!oe&&!(0,r.isURL)($)&&v().createElement(v().Fragment,null,v().createElement(n.Button,{className:"photo-block-pub-url-input__search-button",icon:v().createElement(S.Z,null),iconSize:18,label:(0,h.__)("Search for a Page","photo-block"),onClick:function(){y(!0)}})),!oe&&(0,r.isURL)($)&&v().createElement(v().Fragment,null,v().createElement(n.Button,{className:"photo-block-pub-url-input__apply-button",icon:v().createElement(R.Z,null),iconSize:18,label:(0,h.__)("Apply Link","photo-block"),onClick:function(e){var o={permalink:$,label:(0,r.filterURLForDisplay)($),slug:"",value:""};q(o),t.onItemSelect(e,$)}}))))),b&&!!u.length&&v().createElement("div",{className:"photo-block-suggestions-wrapper"},v().createElement("div",{role:"listbox",id:W,className:"photo-block-url-input__suggestions"},u.map((function(e,o){var r="photo-block-suggested-value-".concat(e.value),a=f()("photo-block-url-input__suggestion",{"is-selected":e.value===B});return v().createElement(n.Button,{key:r,id:r,value:e.value,role:"option","aria-selected":e.value===B,className:a,onClick:function(n){M(parseInt(n.target.value)),H(o),q(e),y(!1),t.onItemSelect(n,e.permalink)},icon:"post"===e.type?v().createElement(O.Z,null):v().createElement(x.Z,null),iconSize:2,iconPosition:"left"},v().createElement("span",{className:"photo-block-search-item"},v().createElement("span",{className:"photo-block-search-item-title"},e.label),v().createElement("span",{className:"photo-block-search-item-info"},e.permalink)))})))))};I.defaultProps={label:(0,h.__)("Page","photo-block"),onItemSelect:function(){},hasInititialFocus:!1,itemIcon:v().createElement(v().Fragment,null)},I.propTypes={restEndpoint:g().string.isRequired,restNonce:g().string.isRequired,label:g().string.isRequired,onItemSelect:g().func.isRequired,hasInititialFocus:g().bool.isRequired,itemIcon:g().element.isRequired};var L=I,D=function(e){var t=e.attributes,o=e.setAttributes,r=e.anchorRef;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}((0,p.useContext)(b.Z));var a=t.mediaLinkType,d=t.mediaLinkTitle,m=t.mediaLinkUrl,v=t.lightboxCaption,y=t.lightboxEnabled,g=t.lightboxShowCaption;return React.createElement(React.Fragment,null,React.createElement(n.Popover,{position:"bottom center",className:"dlx-photo-block__media-link-popover",expandOnMobile:!0,focusOnMount:!0,onClose:function(){e.onClose()},anchor:r},React.createElement("div",{className:"dlx-photo-block__media-link-container"},React.createElement("h2",null,(0,h.__)("Select where to link to.","photo-block")),React.createElement(n.ButtonGroup,{className:"dlx-photo-block__media-link-button-group"},React.createElement(n.Button,{variant:"secondary",icon:React.createElement(l,null),className:f()({"is-pressed":"none"===a}),onClick:function(){o({mediaLinkType:"none"})}},React.createElement("span",{className:"dlx-photo-block__media-link-button-text"},(0,h.__)("No link","photo-block"))),React.createElement(n.Button,{variant:"secondary",icon:React.createElement(i.Z,null),className:f()({"is-pressed":"image"===a}),onClick:function(){o({mediaLinkType:"image"})}},(0,h.__)("The full size photo","photo-block")),React.createElement(n.Button,{variant:"secondary",icon:React.createElement(c,null),className:f()({"is-pressed":"page"===a}),onClick:function(){o({mediaLinkType:"page"})}},(0,h.__)("The photo's page","photo-block")),React.createElement(n.Button,{variant:"secondary",icon:React.createElement(u.Z,null),className:f()({"is-pressed":"custom"===a}),onClick:function(){o({mediaLinkType:"custom"})}},(0,h.__)("Custom link","photo-block"))),"custom"===a&&React.createElement(React.Fragment,null,React.createElement(L,{restNonce:photoBlock.restNonce,restEndpoint:photoBlock.restUrl+"/search/pages",itemIcon:React.createElement(u.Z,null),onItemSelect:function(e,t){o({mediaLinkUrl:t})},savedValue:m})),"image"===a&&React.createElement(React.Fragment,null,React.createElement("div",{className:"pdlx-photo-block__media-link-media-external"},React.createElement(n.Button,{variant:"link",icon:React.createElement(s,null),iconSize:18,iconPosition:"right",label:(0,h.__)("Open in new tab","archive-pages-pro"),href:t.photo.full,target:"_blank",rel:"noopener noreferrer"},(0,h.__)("Media File","photo-block")))),"page"===a&&React.createElement(React.Fragment,null,React.createElement("div",{className:"pdlx-photo-block__media-link-media-page"},React.createElement(n.Button,{variant:"link",icon:React.createElement(s,null),iconSize:18,iconPosition:"right",label:(0,h.__)("Open in new tab","archive-pages-pro"),href:t.photo.attachment_link,target:"_blank",rel:"noopener noreferrer"},(0,h.__)("Attachment Page","photo-block")))),"image"===a&&React.createElement(React.Fragment,null,React.createElement(n.PanelBody,{title:(0,h.__)("Lightbox","photo-block"),initialOpen:!1},React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,h.__)("Enable lightbox","photo-block"),checked:y,onChange:function(e){o({lightboxEnabled:e})},help:(0,h.__)("Popup the full size photo in a lightbox when clicked.","photo-block")})),y&&React.createElement(React.Fragment,null,React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,h.__)("Show caption","photo-block"),checked:g,onChange:function(e){o({lightboxShowCaption:e})}})),g&&React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,h.__)("Custom Caption (optional)","photo-block"),value:v,onChange:function(e){o({lightboxCaption:e})},help:(0,h.__)("Leave blank to use the photo's caption.","photo-block")}))))),"none"!==a&&React.createElement(n.PanelBody,{title:(0,h.__)("Advanced","photo-block"),initialOpen:!1},React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,h.__)("Open in new tab","photo-block"),checked:t.mediaLinkNewTab,onChange:function(e){""===t.mediaLinkRel&&e&&o({mediaLinkRel:"noopener noreferrer"}),"noopener noreferrer"!==t.mediaLinkRel||e||o({mediaLinkRel:""}),o({mediaLinkNewTab:e})}})),React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,h.__)("Link Title","photo-block"),value:d,onChange:function(e){o({mediaLinkTitle:e})},help:(0,h.__)("The link title attribute is for SEO and accessibility purposes. It is used to describe the link.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,h.__)("Link Rel","photo-block"),value:t.mediaLinkRel,onChange:function(e){o({mediaLinkRel:e})},help:(0,h.__)("The link rel attribute is for SEO and accessibility purposes. It is used to describe the relationship between the current document and the linked document.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,h.__)("Link Class","photo-block"),value:t.mediaLinkClass,onChange:function(e){o({mediaLinkClass:e})},help:(0,h.__)("Add a CSS class to the link for styling purposes.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,h.__)("Link Anchor ID","photo-block"),value:t.mediaLinkAnchorId,onChange:function(e){o({mediaLinkAnchorId:e})},help:(0,h.__)("This is the ID for the link, which you can use to link to the photo with an anchor. The ID for each link should be unique.","photo-block")}))))))}},626:function(e,t,o){var n=o(9196),r=o.n(n),a=o(5697),l=o.n(a),i=o(5609),c=o(970);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},s.apply(this,arguments)}function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){d(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function d(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var m=function(e){var t=e.uniqueId,o=e.initialOpen,a=void 0===o||o,l=e.id,u=void 0===l?"":l,p=f((0,n.useState)(a),2),b=p[0],m=p[1],v=f((0,c.Z)(),1)[0];return(0,n.useEffect)((function(){var e=localStorage.getItem("photo-block-panel-body-".concat(t));if(e){var o=JSON.parse(e);if(o["".concat(u)]){var n=o["".concat(u)].isOpen;m(n)}}}),[v]),r().createElement(i.PanelBody,s({},e,{onToggle:function(e){var o=localStorage.getItem("photo-block-panel-body-".concat(t)),n=d({},"".concat(u),{isOpen:e});o&&(n=h(h({},JSON.parse(o)),{},d({},"".concat(u),{isOpen:e}))),localStorage.setItem("photo-block-panel-body-".concat(t),JSON.stringify(n))},initialOpen:b}),e.children)};m.defaultProps={uniqueId:"",initialOpen:!0,id:""},m.propTypes={uniqueId:l().string.isRequired,initialOpen:l().bool,id:l().string.isRequired},t.Z=m},2711:function(e,t,o){var n=o(5609),r=(o(2175),o(5736)),a=o(5697),l=o.n(a),i=o(2893),c=function(e){var t=e.attributes,o=e.setAttributes,a=t.htmlAnchor,l=t.figureCSSClasses,c=t.imageCSSClasses,u=t.skipLazyLoading,s=t.imageProtectionEnabled,p=t.hideOnMobile,h=t.hideOnTablet,d=t.hideOnDesktop;return React.createElement(React.Fragment,null,React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,r.__)("HTML Anchor","photo-block"),value:a,onChange:function(e){o({htmlAnchor:e})},help:(0,r.__)('Enter a word or two — without spaces — to make a unique web address just for this photo, called an "anchor." Then, you\'ll be able to link directly to this photo on your page.',"photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,r.__)("Figure CSS Class(es)","photo-block"),value:l,onChange:function(e){o({figureCSSClasses:e})},help:(0,r.__)("Add CSS class(es) directly to the figure tag, which wraps the image.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,r.__)("Image CSS Class(es)","photo-block"),value:c,onChange:function(e){o({imageCSSClasses:e})},help:(0,r.__)("Add CSS class(es) directly to the image tag.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(i.Z,{attributes:t,setAttributes:o})),React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,r.__)("Skip Lazy Loading","photo-block"),checked:u,onChange:function(e){o({skipLazyLoading:e})},help:(0,r.__)("Set a flag which will signal that the image should not be lazy loaded.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,r.__)("Enable Image Protection","photo-block"),checked:s,onChange:function(e){o({imageProtectionEnabled:e})},help:(0,r.__)("Prevent this photo from being downloaded by using the right+click button.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,r.__)("Hide on Mobile","photo-block"),checked:p,onChange:function(e){o({hideOnMobile:e})},help:(0,r.__)("Hide this photo on mobile devices.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,r.__)("Hide on Tablet","photo-block"),checked:h,onChange:function(e){o({hideOnTablet:e})},help:(0,r.__)("Hide this photo on tablet devices.","photo-block")})),React.createElement(n.PanelRow,null,React.createElement(n.ToggleControl,{label:(0,r.__)("Hide on Desktop","photo-block"),checked:d,onChange:function(e){o({hideOnDesktop:e})},help:(0,r.__)("Hide this photo on desktop devices.","photo-block")})))};c.defaultProps={attributes:{},setAttributes:function(){}},c.propTypes={attributes:l().object},t.Z=c},8931:function(e,t,o){o.d(t,{Z:function(){return C}});var n=o(5609),r=o(2175),a=o(5736),l=o(6472);const i=(0,l.Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),c=(0,l.Z)("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var u=o(243),s=o(7564),p=o(5697),h=o.n(p),d=o(1552),f=o(1542),b=o(4280),m=o(6429),v=o(970),y=o(2179),g=o(1828),_=o(626);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function w(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?E(Object(o),!0).forEach((function(t){S(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function S(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var O=["px","em","rem","%","vh"],x=function(e){var t,o,l=e.attributes,p=e.setAttributes,h=l.uniqueId,k=l.photoOpacity,E=l.photoBlur,S=l.photoObjectFit,x=l.photoObjectPosition,C=l.photoObjectPositionCustom,P=l.photoDropShadow,j=l.photoBackgroundColor,A=l.containerHeight,N=l.containerMaxWidth,T=l.containerMaxHeight,I=l.containerMinWidth,L=l.containerMinHeight,D=l.photoPaddingSize,B=l.photoMarginSize,M=l.photoBorderRadius,Z=l.photoBorder,F=l.containerWidth,q=(t=(0,v.Z)("Desktop"),o=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(t,o)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?R(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],z=React.createElement(React.Fragment,null,React.createElement(_.Z,{title:(0,a.__)("Image Styles","photo-block"),icon:React.createElement(i,null),className:"photo-block__inspector-panel",id:"photo-block__photo-image-styles",uniqueId:h,initialOpen:!0,scrollAfterOpen:!1},React.createElement(d.Z,{value:j,key:"background-color-photo",onChange:function(e,t){p({photoBackgroundColor:t})},label:(0,a.__)("Background Color","highlight-and-share"),defaultColors:photoBlock.palette,defaultColor:"transparent",slug:"background-color-photo"}),React.createElement(n.RangeControl,{label:(0,a.__)("Opacity","photo-block"),value:k,onChange:function(e){p({photoOpacity:e})},min:0,max:1,step:.01}),React.createElement(n.RangeControl,{label:(0,a.__)("Blur","photo-block"),value:E,onChange:function(e){p({photoBlur:e})},min:0,max:10,step:.01}),React.createElement(n.ToggleControl,{label:(0,a.__)("Enable Dropshadow","photo-block"),checked:P.enabled,onChange:function(e){p({photoDropShadow:w(w({},P),{},{enabled:e})})}}),P.enabled&&React.createElement(f.Z,{label:(0,a.__)("Drop Shadow","photo-block"),attributes:l,setAttributes:p})),React.createElement(_.Z,{title:(0,a.__)("CSS Styles","photo-block"),className:"photo-block__inspector-panel",icon:React.createElement(c,null),id:"photo-block__photo-css-gram",uniqueId:h,initialOpen:!1,scrollAfterOpen:!1},React.createElement(b.Z,{attributes:l,setAttributes:p})),React.createElement(_.Z,{title:(0,a.__)("Padding, Margin, and Border","photo-block"),initialOpen:!1,icon:React.createElement(u.Z,null),className:"photo-block__inspector-panel",id:"photo-block__photo-dimensions-styles",uniqueId:h,scrollAfterOpen:!1},React.createElement(y.Z,{label:(0,a.__)("Photo Padding","photo-block"),values:D,onValuesChange:function(e){p({photoPaddingSize:e})},labelTop:(0,a.__)("Top Padding","photo-block"),labelRight:(0,a.__)("Right Padding","photo-block"),labelBottom:(0,a.__)("Bottom Padding","photo-block"),labelLeft:(0,a.__)("Left Padding","photo-block"),labelAll:(0,a.__)("Change Padding","photo-block")}),React.createElement(y.Z,{label:(0,a.__)("Photo Margin","photo-block"),values:B,onValuesChange:function(e){p({photoMarginSize:e})},labelTop:(0,a.__)("Top Margin","photo-block"),labelRight:(0,a.__)("Right Margin","photo-block"),labelBottom:(0,a.__)("Bottom Margin","photo-block"),labelLeft:(0,a.__)("Left Margin","photo-block"),labelAll:(0,a.__)("Change Margin","photo-block"),allowNegatives:!0}),React.createElement(g.Z,{label:(0,a.__)("Photo Border","photo-block"),values:Z,onValuesChange:function(e){p({photoBorder:e})},labelTop:(0,a.__)("Top Border","photo-block"),labelRight:(0,a.__)("Right Border","photo-block"),labelBottom:(0,a.__)("Bottom Border","photo-block"),labelLeft:(0,a.__)("Left Border","photo-block"),labelAll:(0,a.__)("Change Border","photo-block")}),React.createElement(y.Z,{label:(0,a.__)("Photo Border Radius","photo-block"),values:M,onValuesChange:function(e){p({photoBorderRadius:e})},labelTop:(0,a.__)("Top-left Radius","photo-block"),labelRight:(0,a.__)("Top-right Radius","photo-block"),labelBottom:(0,a.__)("Bottom-right Radius","photo-block"),labelLeft:(0,a.__)("Bottom-left Radius","photo-block"),labelAll:(0,a.__)("Change Border Radius","photo-block"),isBorderRadius:!0})),React.createElement(_.Z,{title:(0,a.__)("Container Sizing","photo-block"),initialOpen:!1,icon:React.createElement(s.Z,null),className:"photo-block__inspector-panel",id:"photo-block__photo-container-styles",uniqueId:h,scrollAfterOpen:!1},React.createElement(n.PanelRow,null,React.createElement(n.SelectControl,{label:(0,a.__)("Object Fit","photo-block"),value:S,options:[{label:(0,a.__)("None","photo-block"),value:"none"},{label:(0,a.__)("Inherit","photo-block"),value:"inherit"},{label:(0,a.__)("Fill","photo-block"),value:"fill"},{label:(0,a.__)("Contain","photo-block"),value:"contain"},{label:(0,a.__)("Cover","photo-block"),value:"cover"},{label:(0,a.__)("Scale Down","photo-block"),value:"scale-down"}],onChange:function(e){p({photoObjectFit:e})},help:(0,a.__)("How the image should be resized to fit its container.","photo-block")})),"none"!==S&&React.createElement(n.PanelRow,null,React.createElement(n.SelectControl,{label:(0,a.__)("Object Position","photo-block"),value:x,options:[{label:(0,a.__)("None","photo-block"),value:"none"},{label:(0,a.__)("Top","photo-block"),value:"top"},{label:(0,a.__)("Right","photo-block"),value:"right"},{label:(0,a.__)("Bottom","photo-block"),value:"bottom"},{label:(0,a.__)("Left","photo-block"),value:"left"},{label:(0,a.__)("Custom","photo-block"),value:"custom"}],onChange:function(e){p({photoObjectPosition:e})},help:(0,a.__)("How the image should be positioned inside the container.","photo-block")})),"none"!==S&&"custom"===x&&React.createElement(n.PanelRow,null,React.createElement(n.TextControl,{label:(0,a.__)("Custom Object Position","photo-block"),value:C,onChange:function(e){p({photoObjectPositionCustom:e})},help:(0,a.__)("Enter a custom object position in CSS format.","photo-block")})),React.createElement("div",{className:"dlx-photo-block__container-width"},React.createElement(m.Z,{label:(0,a.__)("Width","photo-block"),values:F,screenSize:q,onValuesChange:function(e){p({containerWidth:e})}})),React.createElement("div",{className:"dlx-photo-block__container-height"},React.createElement(m.Z,{label:(0,a.__)("Height","photo-block"),values:A,screenSize:q,units:O,onValuesChange:function(e){p({containerHeight:e})}})),React.createElement("div",{className:"dlx-photo-block__container-min-width"},React.createElement(m.Z,{label:(0,a.__)("Min Width","photo-block"),values:I,screenSize:q,onValuesChange:function(e){p({containerMinWidth:e})}})),React.createElement("div",{className:"dlx-photo-block__container-min-height"},React.createElement(m.Z,{label:(0,a.__)("Min Height","photo-block"),values:L,screenSize:q,units:O,onValuesChange:function(e){p({containerMinHeight:e})}})),React.createElement("div",{className:"dlx-photo-block__container-max-width"},React.createElement(m.Z,{label:(0,a.__)("Max Width","photo-block"),values:N,screenSize:q,onValuesChange:function(e){p({containerMaxWidth:e})}})),React.createElement("div",{className:"dlx-photo-block__containermax-height"},React.createElement(m.Z,{label:(0,a.__)("Max Height","photo-block"),values:T,screenSize:q,units:O,onValuesChange:function(e){p({containerMaxHeight:e})}}))));return React.createElement(r.InspectorControls,null,z)};x.defaultProps={attributes:{},setAttributes:function(){}},x.propTypes={attributes:h().object};var C=x},4201:function(e,t,o){o.r(t),o.d(t,{default:function(){return we}});var n=o(9307),r=o(5609),a=o(2175),l=o(5736),i=o(9818),c=o(4981),u=o(6472);const s=(0,u.Z)("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]);var p=o(5283),h=o(1408),d=o(7587);const f=(0,u.Z)("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]),b=(0,u.Z)("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);var m=o(853),v=o(1787),y=o(4184),g=o.n(y),_=o(4797),k=o(802),E=o(6974),w=o(970),S=o(626),R=o(8931),O=o(2711),x=o(9196),C=o.n(x),P=C().createContext(),j=o(7536),A=o(7653),N=o(3696),T=o(7144);function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},I.apply(this,arguments)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var B=function(e){var t,o,n,a=L((0,x.useState)("new"),2),c=a[0],u=a[1],s=L((0,x.useState)(!1),2),p=s[0],h=s[1],d=e.title,f=(e.attributes,e.setAttributes,e.clientId),b=(0,x.useContext)(P),m=b.savedPresets,v=b.setSavedPresets,y=(b.savingPreset,b.setSavingPreset),_=(b.defaultPreset,b.setDefaultPreset),k=(0,j.cI)({defaultValues:{presetTitle:"",selectedPreset:null,defaultPreset:!1}}),E=k.control,w=k.handleSubmit,S=(k.setValue,(0,j.cl)({control:E}).errors),R=function(){var e,t=((null===(e=(0,i.select)("core/block-editor").getBlocksByClientId(f)[0])||void 0===e?void 0:e.innerBlocks)||[]).find((function(e){return"dlxplugins/photo-caption-block"===e.name})),o=t?t.attributes:{};return{photoAttributes:(0,i.select)("core/block-editor").getBlockAttributes(f),captionAttributes:o}},O=function(e){e.forEach((function(t){t.is_default&&_(t),e.some((function(e){return e.is_default}))||_(null)}))},D=[{label:(0,l.__)("Save Preset","photo-block"),value:"new"},{label:(0,l.__)("Override Preset","photo-block"),value:"override"}];return 0===m.length&&(D=[{label:(0,l.__)("Save Preset","photo-block"),value:"new"}]),C().createElement("div",{className:"photo-block-custom-preset-modal"},C().createElement(r.Modal,{title:d,onRequestClose:function(){return y(!1)},className:"photo-block-preset-modal",shouldCloseOnClickOutside:!1},C().createElement(r.RadioControl,{label:(0,l.__)("Save a new preset or override an existing one.","photo-block"),className:"photo-block-preset-modal-radio-control",selected:c,options:D,onChange:function(e){u(e)}}),C().createElement("form",{onSubmit:w((function(e){"new"===c?function(e){h(!0);var t="".concat(ajaxurl),o=new FormData;o.append("action","dlx_photo_block_save_presets"),o.append("nonce",photoBlock.presetSaveNewNonce),o.append("attributes",JSON.stringify(R())),o.append("formData",JSON.stringify(e)),fetch(t,{method:"POST",body:o,headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.data.presets;h(!1),y(!1),v(t),O(t)})).catch((function(e){y(!1)}))}(e):function(e){h(!0);var t="".concat(ajaxurl),o=new FormData;o.append("action","dlx_photo_block_override_preset"),o.append("nonce",photoBlock.presetSaveNewNonce),o.append("attributes",JSON.stringify(R())),o.append("editId",e.selectedPreset),o.append("isDefault",e.defaultPreset),fetch(t,{method:"POST",body:o,headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.data.presets;h(!1),y(!1),v(t),O(t)})).catch((function(e){y(!1)}))}(e)}))},"new"===c&&C().createElement(C().Fragment,null,C().createElement("div",{className:"photo-block-preset-modal-new-preset"},C().createElement(j.Qr,{name:"presetTitle",control:E,rules:{required:!0,pattern:/^[a-zA-Z0-9-_ ]+$/},render:function(e){var t,o=e.field;return C().createElement(r.TextControl,I({},o,{label:(0,l.__)("Preset Name","photo-block"),className:g()("photo-block-admin__text-control",{"is-required":!0,"has-error":"required"===(null===(t=S.presetTitle)||void 0===t?void 0:t.type)})}))}}),"required"===(null===(t=S.presetTitle)||void 0===t?void 0:t.type)&&C().createElement(T.Z,{message:(0,l.__)("The Preset Name field is required."),status:"error",politeness:"assertive",icon:A.Z}),"pattern"===(null===(o=S.presetTitle)||void 0===o?void 0:o.type)&&C().createElement(T.Z,{message:(0,l.__)("This Preset Name field contains invalid characters."),status:"error",politeness:"assertive",icon:A.Z}))),"override"===c&&C().createElement(C().Fragment,null,m.length>0&&C().createElement("div",{className:"photo-block-preset-modal-override-preset"},C().createElement(j.Qr,{name:"selectedPreset",control:E,rules:{required:!0},render:function(e){var t,o=e.field,n=o.onChange,a=o.value;return C().createElement(r.RadioControl,{label:(0,l.__)("Select a preset to override","photo-block"),className:"is-required",selected:a,options:(t=[],m.forEach((function(e){t.push({label:e.title,value:e.id+""})})),t),onChange:function(e){return n(e)}})}}),"required"===(null===(n=S.selectedPreset)||void 0===n?void 0:n.type)&&C().createElement(T.Z,{message:(0,l.__)("This field is required."),status:"error",politeness:"assertive",icon:A.Z}))),C().createElement(j.Qr,{name:"defaultPreset",control:E,render:function(e){var t=e.field,o=t.onChange,n=t.value;return C().createElement(r.ToggleControl,{label:(0,l.__)("Make This Preset the Default","photo-block"),checked:n,onChange:function(e){return o(e)},help:(0,l.__)("If this preset is selected as the default, it will be applied to all new photo blocks.","photo-block")})}}),C().createElement("div",{className:"photo-block-preset-modal-button-group"},C().createElement(r.Button,{type:"submit",variant:"primary",className:"photo-block-preset-modal-apply-button",disabled:p,icon:C().createElement(N.Z,null)},p?(0,l.__)("Saving…","photo-block"):(0,l.__)("Save Preset","photo-block")),C().createElement(r.Button,{variant:"secondary",onClick:function(){y(!1)},className:"photo-block-preset-modal-cancel-button",disabled:p},(0,l.__)("Cancel","photo-block"))))))};const M=(0,u.Z)("Edit3",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z",key:"18w55b"}]]);var Z=o(3718);const F=(0,u.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);var q=o(5697),z=o.n(q);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function H(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function G(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?H(Object(o),!0).forEach((function(t){W(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function W(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==U(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===U(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var $=function(e){var t,o,n,u,s=e.setAttributes,p=e.label,h=e.photoAttributes,d=e.captionAttributes,f=e.uniqueId,b=e.clientId,m=(n=(0,x.useState)(!1),u=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(n,u)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?V(e,t):void 0}}(n,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=m[0],y=m[1],g=(0,i.useDispatch)(a.store),_=g.insertBlock,k=g.updateBlockAttributes;return C().createElement(C().Fragment,null,C().createElement(r.Button,{variant:"secondary",onClick:function(e){e.preventDefault(),y(!0)},className:"photo-block-preset-button",label:null!=e&&e.icon?(0,l.__)("This is your default preset.","photo-block"):null,disabled:null!==(t=e.disabled)&&void 0!==t&&t,icon:null!==(o=null==e?void 0:e.icon)&&void 0!==o?o:null,showTooltip:!(null==e||!e.icon)},p),v&&C().createElement(C().Fragment,null,C().createElement(r.Modal,{title:(0,l.__)("Apply Preset?","photo-block"),onRequestClose:function(){return y(!1)},className:"photo-block-preset-modal"},C().createElement("p",null,(0,l.__)("Are you sure you want to apply this preset? This will override your existing settings.","photo-block")),C().createElement(r.Button,{variant:"primary",onClick:function(){var e,t=((null===(e=(0,i.select)("core/block-editor").getBlocksByClientId(b)[0])||void 0===e?void 0:e.innerBlocks)||[]).find((function(e){return"dlxplugins/photo-caption-block"===e.name})),o={uniqueId:f},n=G(G({},h),o);if(s(n),!t&&d){var r=(0,c.createBlock)("dlxplugins/photo-caption-block",d);_(r,void 0,b)}if(t&&d){var a=G(G({},d),o);k(t.clientId,a)}y(!1)},className:"photo-block-preset-modal-apply-button"},(0,l.__)("Apply Preset","photo-block")),C().createElement(r.Button,{variant:"secondary",onClick:function(){y(!1)}},(0,l.__)("Cancel","photo-block")))))};$.propTypes={setAttributes:z().func.isRequired,label:z().string.isRequired,presetData:z().object.isRequired},$.defaultProps={label:"Purple",setAttributes:function(){},presetData:{}};var Q=$;function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var Y=function(e){var t,o,n,a=e.title,i=e.setAttributes,c=e.photoAttributes,u=e.captionAttributes,s=e.uniqueId,p=e.editId,h=e.clientId,d=e.saveNonce,f=e.deleteNonce,b=(0,x.useContext)(P),m=b.editPresets,v=b.setShowEditModal,y=b.setShowDeleteModal,_=b.defaultPreset,k=(o=(0,x.useState)(null!==(t=null==_?void 0:_.id)&&void 0!==t?t:0),n=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(o,n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?J(e,t):void 0}}(o,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=k[0],w=k[1];(0,x.useEffect)((function(){var e;(null==_?void 0:_.id)!==E&&w(null!==(e=null==_?void 0:_.id)&&void 0!==e?e:0)}),[_]);var S=function(){return E===p&&0!==E};return C().createElement(C().Fragment,null,C().createElement("div",{className:g()("photo-block-preset-edit-container",{"photo-block-preset-edit-container--edit":m})},m&&C().createElement("div",{className:"photo-block-preset-edit-buttons"},C().createElement(r.Button,{variant:"secondary",onClick:function(e){v({show:!0,editId:p,title:a,saveNonce:d,isDefault:S()})},label:(0,l.__)("Edit Preset","photo-block"),icon:C().createElement(M,null),className:"photo-block-preset-edit-button"}),C().createElement(r.Button,{variant:"secondary",onClick:function(e){y({show:!0,editId:p,deleteNonce:f})},label:(0,l.__)("Delete Preset","photo-block"),icon:C().createElement(Z.Z,null),className:"photo-block-preset-delete-button"})),C().createElement(Q,{key:p,label:""===a?(0,l.__)("Untitled Preset","photo-block"):a,setAttributes:i,uniqueId:s,className:"photo-block-preset-button",clientId:h,photoAttributes:c,captionAttributes:u,disabled:m,icon:S()?C().createElement(F,null):null})))};function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},K.apply(this,arguments)}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var ee=function(e){var t,o,n,a,i=e.title,c=e.editId,u=e.saveNonce,s=(n=(0,x.useState)(!1),a=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(n,a)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?X(e,t):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=s[0],h=s[1],d=(0,x.useContext)(P),f=d.setSavedPresets,b=d.showEditModal,m=d.setShowEditModal,v=d.defaultPreset,y=d.setDefaultPreset,g=(0,j.cI)({defaultValues:{title:i,editId:c,isDefault:(null==v?void 0:v.id)===c}}),_=g.control,k=g.handleSubmit,E=(g.getValues,(0,j.cl)({control:_}).errors);return b?C().createElement(r.Modal,{title:(0,l.__)("Update Preset","photo-block"),onRequestClose:function(){return m(!1)},className:"photo-block-preset-modal",shouldCloseOnClickOutside:!1},C().createElement("form",{onSubmit:k((function(e){h(!0);var t="".concat(ajaxurl),o=new FormData;o.append("action","dlx_photo_block_save_preset"),o.append("nonce",u),o.append("editId",e.editId),o.append("title",e.title),o.append("isDefault",!!e.isDefault),fetch(t,{method:"POST",body:o,headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.data.presets;f(t),h(!1),t.forEach((function(e){e.is_default&&y(e),t.some((function(e){return e.is_default}))||y(null)})),m(!1)})).catch((function(e){h(!1)}))}))},C().createElement(j.Qr,{name:"title",control:_,rules:{required:!0,pattern:/^[a-zA-Z0-9-_ ]+$/},render:function(e){var t=e.field;return C().createElement(r.TextControl,K({},t,{label:(0,l.__)("Preset Name","photo-block"),className:"is-required"}))}}),"required"===(null===(t=E.title)||void 0===t?void 0:t.type)&&C().createElement(T.Z,{message:(0,l.__)("This field is required."),status:"error",politeness:"assertive",icon:C().createElement(A.Z,null)}),"pattern"===(null===(o=E.title)||void 0===o?void 0:o.type)&&C().createElement(T.Z,{message:(0,l.__)("This field contains invalid characters."),status:"error",politeness:"assertive",icon:C().createElement(A.Z,null)}),C().createElement(j.Qr,{name:"isDefault",control:_,render:function(e){var t=e.field,o=t.onChange,n=t.value;return C().createElement(r.ToggleControl,{label:(0,l.__)("Set Default Preset","photo-block"),checked:n,onChange:function(e){return o(e)},help:(0,l.__)("This preset will be applied to all new Photo Blocks.","photo-block")})}}),C().createElement(j.Qr,{name:"editId",control:_,render:function(e){var t=e.field;return C().createElement(r.TextControl,K({type:"hidden"},t))}}),C().createElement(r.Button,{type:"submit",variant:"primary",className:"photo-block-preset-modal-apply-button",disabled:p},p?(0,l.__)("Saving…","photo-block"):(0,l.__)("Apply Changes","photo-block")),!p&&C().createElement(r.Button,{variant:"secondary",onClick:function(){m(!1)}},(0,l.__)("Cancel","photo-block")))):null};function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},te.apply(this,arguments)}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var ne=function(e){e.title;var t,o,n=e.editId,a=e.deleteNonce,i=(t=(0,x.useState)(!1),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(t,o)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?oe(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],u=i[1],s=(0,x.useContext)(P),p=s.setSavedPresets,h=s.showDeleteModal,d=s.setShowDeleteModal,f=(0,j.cI)({defaultValues:{editId:n}}),b=f.control,m=f.handleSubmit;return(0,j.cl)({control:b}).errors,h?C().createElement(r.Modal,{title:(0,l.__)("Delete Preset","photo-block"),onRequestClose:function(){return d(!1)},className:"photo-block-preset-modal",shouldCloseOnClickOutside:!1},C().createElement("form",{onSubmit:m((function(e){u(!0);var t="".concat(ajaxurl),o=new FormData;o.append("action","dlx_photo_block_delete_preset"),o.append("nonce",a),o.append("editId",e.editId),fetch(t,{method:"POST",body:o,headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.data.presets;p(t),u(!1),d(!1)})).catch((function(e){u(!1)}))}))},C().createElement(j.Qr,{name:"editId",control:b,render:function(e){var t=e.field;return C().createElement(r.TextControl,te({type:"hidden"},t))}}),C().createElement(r.Button,{type:"submit",variant:"primary",className:"photo-block-preset-modal-apply-button",disabled:c},c?(0,l.__)("Deleting…","photo-block"):(0,l.__)("Delete Preset","photo-block")),!c&&C().createElement(r.Button,{variant:"secondary",onClick:function(){d(!1)}},(0,l.__)("Cancel","photo-block")))):null};function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},re.apply(this,arguments)}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var ie=photoBlock.presetCanEditor,ce=function(e){var t=ae((0,x.useState)(!0),2),o=t[0],n=t[1],a=ae((0,x.useState)("new"),2),i=(a[0],a[1],ae((0,x.useState)(""),2)),c=(i[0],i[1],e.setAttributes),u=e.clientId,s=e.attributes.uniqueId,p=(0,x.useContext)(P),h=p.savedPresets,d=p.setSavedPresets,f=p.savingPreset,b=p.setSavingPreset,m=p.editPresets,v=p.setEditPresets,y=p.showEditModal,g=p.showDeleteModal,_=p.setDefaultPreset,k=(0,x.useRef)(null);return(0,x.useEffect)((function(){if(k.current){var e="".concat(ajaxurl),t=new FormData;t.append("action","dlx_photo_block_load_presets"),t.append("nonce",photoBlock.presetLoadNonce),fetch(e,{method:"POST",body:t,headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.data.presets;n(!1),d(t),t.forEach((function(e){e.is_default&&_(e)}))})).catch((function(e){n(!1)}))}}),[k]),C().createElement(C().Fragment,null,y&&C().createElement(ee,{editId:y.editId,title:y.title,saveNonce:y.saveNonce}),g&&C().createElement(ne,{editId:g.editId,title:g.title,deleteNonce:g.deleteNonce}),C().createElement("div",{className:"photo-block-custom-preset-container",ref:k},o&&("Loading Presets",C().createElement("div",{className:"photo-block-custom-preset-loading-container"},C().createElement("span",{className:"photo-block-custom-preset-loading-label"},"Loading Presets"),C().createElement(r.Spinner,null))),!o&&C().createElement(C().Fragment,null,h.length>0?C().createElement("div",{className:"photo-block-presets"},C().createElement(r.ButtonGroup,null,h.map((function(e){return C().createElement(Y,{key:e.id,editId:e.id,title:e.title,setAttributes:c,uniqueId:s,clientId:u,slug:e.slug,photoAttributes:e.content.attributes.photoAttributes,captionAttributes:e.content.attributes.captionAttributes,saveNonce:e.save_nonce,deleteNonce:e.delete_nonce})})))):C().createElement(C().Fragment,null,C().createElement("p",null,ie?(0,l.__)("No custom presets have been saved yet. Would you like to save a new one?","photo-block"):(0,l.__)("No custom presets have been saved yet.","photo-block"))),ie&&C().createElement("div",{className:"photo-block-custom-preset-actions"},C().createElement("h3",null,(0,l.__)("Preset Actions","photo-block")),!m&&C().createElement(r.Button,{variant:"primary",onClick:function(e){e.preventDefault(),b(!0)},label:(0,l.__)("Save New Preset","photo-block")},(0,l.__)("Save New Preset","photo-block")),!m&&!f&&h.length>0&&C().createElement(r.Button,{variant:"secondary",onClick:function(e){e.preventDefault(),v(!0)},label:(0,l.__)("Edit Presets","photo-block")},(0,l.__)("Edit Presets","photo-block")),m&&!f&&C().createElement(r.Button,{variant:"primary",onClick:function(e){e.preventDefault(),v(!1)},label:(0,l.__)("Exit Edit Mode","photo-block")},(0,l.__)("Exit Edit Mode","photo-block")))),f&&C().createElement(B,re({title:(0,l.__)("Save Preset","photo-block")},e))))};function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var pe=function(e){var t=ue((0,x.useState)([]),2),o=t[0],n=t[1],r=ue((0,x.useState)(!1),2),a=r[0],l=r[1],i=ue((0,x.useState)(!1),2),c=i[0],u=i[1],s=ue((0,x.useState)(!1),2),p=s[0],h=s[1],d=ue((0,x.useState)(!1),2),f=d[0],b=d[1],m=ue((0,x.useState)(null),2),v=m[0],y=m[1];return C().createElement(P.Provider,{value:{savedPresets:o,setSavedPresets:n,savingPreset:a,setSavingPreset:l,editPresets:c,setEditPresets:u,showEditModal:p,setShowEditModal:h,showDeleteModal:f,setShowDeleteModal:b,defaultPreset:v,setDefaultPreset:y}},C().createElement(ce,e))},he=o(4014);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},fe.apply(this,arguments)}function be(){be=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,n=Object.defineProperty||function(e,t,o){e[t]=o.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,o){return e[t]=o}}function u(e,t,o,r){var a=t&&t.prototype instanceof h?t:h,l=Object.create(a.prototype),i=new R(r||[]);return n(l,"_invoke",{value:k(e,o,i)}),l}function s(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function h(){}function d(){}function f(){}var b={};c(b,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(O([])));v&&v!==t&&o.call(v,a)&&(b=v);var y=f.prototype=h.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(n,a,l,i){var c=s(e[n],e,a);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==de(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,l,i)}),(function(e){r("throw",e,l,i)})):t.resolve(p).then((function(e){u.value=e,l(u)}),(function(e){return r("throw",e,l,i)}))}i(c.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function k(e,t,o){var n="suspendedStart";return function(r,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw a;return{value:void 0,done:!0}}for(o.method=r,o.arg=a;;){var l=o.delegate;if(l){var i=E(l,o);if(i){if(i===p)continue;return i}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===n)throw n="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n="executing";var c=s(e,t,o);if("normal"===c.type){if(n=o.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(n="completed",o.method="throw",o.arg=c.arg)}}}function E(e,t){var o=t.method,n=e.iterator[o];if(void 0===n)return t.delegate=null,"throw"===o&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==o&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),p;var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=f,n(y,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(_.prototype),c(_.prototype,l,(function(){return this})),e.AsyncIterator=_,e.async=function(t,o,n,r,a){void 0===a&&(a=Promise);var l=new _(u(t,o,n,r),a);return e.isGeneratorFunction(o)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},g(y),c(y,i,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),o=[];for(var n in t)o.push(n);return o.reverse(),function e(){for(;o.length;){var n=o.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(o,n){return l.type="throw",l.arg=e,t.next=o,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var i=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(i&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),S(o),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var r=n.arg;S(o)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:O(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=void 0),p}},e}function me(e,t,o,n,r,a,l){try{var i=e[a](l),c=i.value}catch(e){return void o(e)}i.done?t(c):Promise.resolve(c).then(n,r)}function ve(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ye(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(o),!0).forEach((function(t){ge(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ve(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ge(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==de(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===de(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,_x,a,l=[],_n=!0,i=!1;try{if(_x=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;_n=!1}else for(;!(_n=(n=_x.call(o)).done)&&(l.push(n.value),l.length!==t);_n=!0);}catch(e){i=!0,r=e}finally{try{if(!_n&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var Ee=(0,n.forwardRef)((function(e,t){var o=e.attributes,u=e.setAttributes,y=e.innerBlockProps,x=e.clientId,C=o.uniqueId,P=o.photo,j=o.imageSize,A=o.imageDimensions,N=o.imageSizePercentage,T=o.photoOpacity,I=o.photoBlur,L=o.photoObjectFit,D=o.photoObjectPosition,B=o.photoObjectPositionCustom,M=o.photoDropShadow,Z=o.photoBackgroundColor,F=o.cssGramFilter,q=(o.photoMaximumWidth,o.containerWidth),z=o.containerHeight,U=o.containerMaxWidth,H=o.containerMaxHeight,G=o.containerMinWidth,W=o.containerMinHeight,V=o.photoPaddingSize,$=o.photoMarginSize,Q=o.photoBorderRadius,J=o.photoBorder,Y=(o.skipLazyLoading,o.imageProtectionEnabled,P.url),K=(P.id,P.width),X=P.height,ee=_e((0,n.useState)(!0),2),te=ee[0],oe=ee[1],ne=_e((0,n.useState)(null),2),re=ne[0],ae=ne[1],le=_e((0,n.useState)(null),2),ie=le[0],ce=le[1],ue=_e((0,n.useState)("settings"),2),se=(ue[0],ue[1]),de=_e((0,n.useState)(!1),2),ve=de[0],ge=de[1],ke=_e((0,n.useState)(!1),2),Ee=ke[0],we=ke[1],Se=_e((0,n.useState)(null),2),Re=Se[0],Oe=Se[1],xe=(0,n.useContext)(_.Z),Ce=(xe.screen,xe.setScreen),Pe=xe.captionPosition,je=xe.setImageFile,Ae=(xe.imageFile,xe.originalImageFile),Ne=(0,i.useDispatch)(a.store),Te=Ne.insertBlock,Ie=Ne.updateBlockAttributes,Le=_e((0,w.Z)("Desktop"),2),De=Le[0];Le[1],(0,n.useEffect)((function(){A.width&&A.height||u({imageDimensions:ye({},P)}),P.url&&je(P)}),[]),(0,n.useEffect)((function(){var e,t,n,r;if(!1===te&&!1===o.defaultsApplied){var a=null!==(e=null===(t=photoBlock)||void 0===t||null===(n=t.defaultPreset)||void 0===n?void 0:n.attributes)&&void 0!==e&&e;if(a){var l=((null===(r=(0,i.select)("core/block-editor").getBlocksByClientId(x)[0])||void 0===r?void 0:r.innerBlocks)||[]).find((function(e){return"dlxplugins/photo-caption-block"===e.name})),s=ye({},a.photoAttributes);if(u(s),!l&&null!=a&&a.captionAttributes){var p=(0,c.createBlock)("dlxplugins/photo-caption-block",null==a?void 0:a.captionAttributes);Te(p,void 0,x)}if(l&&null!=a&&a.captionAttributes){var h=ye({},null==a?void 0:a.captionAttributes);Ie(l.clientId,h)}u({defaultsApplied:!0})}}}),[te]);var Be=function(){var e,t=(e=be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.next=3,(0,k.Z)(photoBlock.restNonce,{},"".concat(photoBlock.restUrl+"/get-image-by-size","/id=").concat(P.id,"/size=").concat(t),"GET").then((function(e){u({photo:ye(ye({},P),e.data)}),u({imageDimensions:ye(ye({},A),e.data)}),u({imageSizePercentage:"100"})})).catch((function(e){console.error(e)})).then((function(){ge(!1)}));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function l(e){me(a,n,r,l,i,"next",e)}function i(e){me(a,n,r,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Me=[];for(var Ze in photoBlock.imageSizes){var Fe=photoBlock.imageSizes[Ze];Me.push({value:Ze,label:Fe.label})}var qe,ze,Ue=React.createElement(React.Fragment,null,React.createElement(r.PanelBody,{title:(0,l.__)("Presets","photo-block"),initialOpen:!1,icon:React.createElement(s,null),className:"photo-block__inspector-panel"},React.createElement(pe,e)),React.createElement(S.Z,{title:(0,l.__)("Photo Settings","photo-block"),icon:React.createElement(p.Z,null),className:"photo-block__inspector-panel",id:"photo-block__photo-settings",uniqueId:C,initialOpen:!0,scrollAfterOpen:!1},React.createElement(r.PanelRow,null,React.createElement(r.TextControl,{label:(0,l.__)("Photo Title","photo-block"),value:P.title,onChange:function(e){u({photo:ye(ye({},P),{},{title:e})})},placeholder:(0,l.__)("Please enter a title for this photo.","photo-block")})),React.createElement(r.PanelRow,null,React.createElement(r.TextareaControl,{label:(0,l.__)("Alt Text","photo-block"),value:P.alt,onChange:function(e){u({photo:ye(ye({},P),{},{alt:e})})},placeholder:(0,l.__)("Please describe this photo.","photo-block"),help:(0,l.__)("Alt text provides a description of the photo for screen readers and search engines.","photo-block")})),React.createElement(r.PanelRow,null,React.createElement(r.SelectControl,{label:(0,l.__)("Image Size","photo-block"),value:j,onChange:function(e){u({imageSize:e}),Be(e)},options:Me})),React.createElement(r.PanelRow,{className:"dlx-photo-block__image-dimensions-row"},React.createElement("h3",null,(0,l.__)("Image Dimensions","photo-block")),ve&&React.createElement(r.Spinner,null),!ve&&React.createElement(React.Fragment,null,React.createElement("div",{className:"dlx-photo-block__image-dimensions"},React.createElement(r.TextControl,{label:(0,l.__)("Width","photo-block"),value:A.width?A.width:K,onChange:function(e){var t=function(e,t,o){var n=e/t;return Math.round(o/n)}(P.width,P.height,e),o={width:e,height:t};u({imageDimensions:ye(ye({},A),o)})},type:"number"}),React.createElement(r.TextControl,{label:(0,l.__)("Height","photo-block"),value:A.height?A.height:X,onChange:function(e){var t=function(e,t,o){var n=e/t;return Math.round(o*n)}(P.width,P.height,e),o={width:t,height:e};u({imageDimensions:ye(ye({},A),o)})},type:"number"})),React.createElement("div",{className:"dlx-photo-block__image-dimensions-buttons"},React.createElement(r.ButtonGroup,{className:"dlx-photo-block__image-dimensions-buttons-group"},React.createElement(r.Button,{isSmall:!0,variant:"secondary",className:g()("dlx-photo-block__image-dimensions-buttons-group-button",{"is-pressed":"25"===N}),onClick:function(){var e=Math.round(.25*P.width),t=Math.round(.25*P.height);u({imageSizePercentage:"25",imageDimensions:ye(ye({},A),{},{width:e,height:t})})}},(0,l.__)("25%","photo-block")),React.createElement(r.Button,{isSmall:!0,className:g()("dlx-photo-block__image-dimensions-buttons-group-button",{"is-pressed":"50"===N}),variant:"secondary",onClick:function(){var e=Math.round(.5*P.width),t=Math.round(.5*P.height);u({imageSizePercentage:"50",imageDimensions:ye(ye({},A),{},{width:e,height:t})})}},(0,l.__)("50%","photo-block")),React.createElement(r.Button,{isSmall:!0,variant:"secondary",className:g()("dlx-photo-block__image-dimensions-buttons-group-button",{"is-pressed":"75"===N}),onClick:function(){var e=Math.round(.75*P.width),t=Math.round(.75*P.height);u({imageSizePercentage:"75",imageDimensions:ye(ye({},A),{},{width:e,height:t})})}},(0,l.__)("75%","photo-block")),React.createElement(r.Button,{isSmall:!0,variant:"secondary",className:g()("dlx-photo-block__image-dimensions-buttons-group-button",{"is-pressed":"100"===N}),onClick:function(){var e=Math.round(P.width),t=Math.round(P.height);u({imageSizePercentage:"100",imageDimensions:ye(ye({},A),{},{width:e,height:t})})}},(0,l.__)("100%","photo-block")))))))),He=React.createElement(r.TabPanel,{className:"dlx-photo-block__inspector-tabs",activeClass:"active-tab",onSelect:function(e){se(e)},children:function(){return React.createElement(React.Fragment,null)},tabs:[{name:"settings",title:(0,l.__)("Settings","photo-block"),className:"dlx-photo-block__inspector-tab",icon:React.createElement(h.Z,null)},{name:"styles",title:(0,l.__)("Styles","photo-block"),className:"dlx-photo-block__inspector-tab",icon:React.createElement(d.Z,null)}]},(function(e){switch(e.name){case"settings":return Ue;case"styles":return React.createElement(R.Z,{attributes:o,setAttributes:u})}})),Ge=React.createElement(a.InspectorControls,null,He),We=React.createElement(O.Z,{attributes:o,setAttributes:u}),Ve=React.createElement(React.Fragment,null,React.createElement(a.BlockControls,null,React.createElement(r.ToolbarGroup,null,React.createElement(r.ToolbarButton,{icon:React.createElement(f,null),label:(0,l.__)("Crop","photo-block"),onClick:function(){Ce("crop")}},(0,l.__)("Crop","photo-block"))),React.createElement(r.ToolbarGroup,null,React.createElement(r.ToolbarButton,{icon:React.createElement(p.Z,null),label:(0,l.__)("Replace Photo","photo-block"),onClick:function(){Ce("initial")}},(0,l.__)("Replace","photo-block")),(qe=null==Ae?void 0:Ae.url,ze=null==P?void 0:P.url,qe&&ze&&qe!==ze&&React.createElement(r.ToolbarButton,{icon:React.createElement(b,null),label:(0,l.__)("Undo","photo-block"),onClick:function(){u({photo:Ae,imageDimensions:{width:Ae.width,height:Ae.height}}),je(Ae)}},(0,l.__)("Undo","photo-block")))),React.createElement(r.ToolbarGroup,null,React.createElement(r.ToolbarButton,{icon:React.createElement(m.Z,null),label:(0,l.__)("Set Accessibility Options","photo-block"),onClick:function(){ce(!ie)},ref:ae}),React.createElement(r.ToolbarButton,{icon:React.createElement(v.Z,null),label:(0,l.__)("Set Link Options","photo-block"),onClick:function(){we(!Ee)},ref:Oe}))),Ee&&React.createElement(E.Z,{attributes:o,setAttributes:u,anchorRef:Re,onClose:function(){we(!1)}}),ie&&React.createElement(r.Popover,{position:"bottom center",onClose:function(){ce(!1)},anchor:re},React.createElement("div",{className:"dlx-photo-block__a11y-popover"},React.createElement("h3",null,(0,l.__)("Accessibility Options","photo-block")),React.createElement(r.TextControl,{label:(0,l.__)("Photo Title","photo-block"),value:P.title,onChange:function(e){u({photo:ye(ye({},P),{},{title:e})})},placeholder:(0,l.__)("Please enter a title for this photo.","photo-block"),help:(0,l.__)("The title is used as a tooltip when hovering over the image.","photo-block")}),React.createElement(r.TextareaControl,{label:(0,l.__)("Alt Text","photo-block"),value:P.alt,onChange:function(e){u({photo:ye(ye({},P),{},{alt:e})})},placeholder:(0,l.__)("Please describe this image.","photo-block"),help:(0,l.__)("Alt text provides a description of the image for screen readers and search engines.","photo-block")})))),$e="\n\t\t#".concat(C," .dlx-photo-block__image-wrapper {\n\t\t\tbackground: ").concat(Z,";\n\t\t\t").concat((0,he.kq)(De,q,"width"),"\n\t\t\t").concat((0,he.kq)(De,z,"height"),"\n\t\t\t").concat((0,he.kq)(De,G,"min-width"),"\n\t\t\t").concat((0,he.kq)(De,W,"min-height"),"\n\t\t\t").concat((0,he.kq)(De,U,"max-width"),"\n\t\t\t").concat((0,he.kq)(De,H,"max-height"),"\n\t\t}\n\t\t#").concat(C," img {\n\t\t\topacity: ").concat(T,";\n\t\t\t").concat(I?"filter: blur(".concat(I,"px);"):"","\n\t\t\tobject-fit: ").concat(L,";\n\t\t\t").concat("none"!==L?"height: 100%; width: 100%;":"","\n\t\t\t").concat("none"!==L&&"custom"!==D?"object-position:"+D+";":"","\n\t\t\t").concat("none"!==L&&"custom"===D&&""!==B?"object-position:"+B+";":"","\n\t\t\tpadding: ").concat((0,he.Ak)(V,De),";\n\t\t\tmargin: ").concat((0,he.Ak)($,De),";\n\t\t\tborder-radius: ").concat((0,he.Ak)(Q,De),";\n\t\t\t").concat((0,he.ed)(J,De),"\n\t\t}\n\t");return M.enabled&&($e+="\n\t\t\t#".concat(C," img {\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tbox-shadow: ").concat(M.inset?"inset ":"").concat(M.horizontal,"px ").concat(M.vertical,"px ").concat(M.blur,"px ").concat(M.spread,"px ").concat(M.color,";\n\t\t\t\t-webkit-box-shadow: ").concat(M.inset?"inset ":"").concat(M.horizontal,"px ").concat(M.vertical,"px ").concat(M.blur,"px ").concat(M.spread,"px ").concat(M.color,";\n\t\t\t}\n\t\t")),React.createElement(React.Fragment,null,Ge,Ve,React.createElement(a.InspectorAdvancedControls,null,We),React.createElement("style",null,$e),React.createElement("div",{className:"dlx-photo-block__screen-edit"},te&&React.createElement("div",{className:"dlx-photo-block__screen-edit-spinner",style:{minWidth:K,minHeight:X,maxWidth:"100%",maxHeight:"100%"}},React.createElement(r.Spinner,null)),React.createElement("figure",{className:"dlx-photo-block__screen-edit-image-wrapper dlx-photo-block__figure"},"top"===Pe&&React.createElement("div",fe({className:"dlx-photo-block__screen-edit-caption dlx-photo-block__caption"},y)),React.createElement("div",{className:"dlx-photo-block__screen-edit-image dlx-photo-block__image-wrapper"},React.createElement("img",{src:Y,className:g()("photo-block-".concat(F," dlx-photo-block__image"),{"has-css-gram":"none"!==F}),width:A.width,height:A.height,alt:"",onLoad:function(){oe(!1)},ref:t,style:{maxWidth:"100%",height:"auto"}}),"overlay"===Pe&&React.createElement("div",fe({className:"dlx-photo-block__screen-edit-caption dlx-photo-block__caption dlx-photo-block__caption--overlay"},y))),"bottom"===Pe&&React.createElement("div",fe({className:"dlx-photo-block__screen-edit-caption dlx-photo-block__caption"},y)))))})),we=Ee},853:function(e,t,o){o.d(t,{Z:function(){return n}});const n=(0,o(6472).Z)("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]])},3696:function(e,t,o){o.d(t,{Z:function(){return n}});const n=(0,o(6472).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])}}]);
//# sourceMappingURL=EditScreen.0.0.2.js.map