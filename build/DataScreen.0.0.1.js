"use strict";(self.webpackChunkphoto_block=self.webpackChunkphoto_block||[]).push([[193],{8973:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var o=a(9307),l=a(5609),c=a(5736),n=a(2175);const r=(0,a(6472).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var s=a(7235),u=a(3766),i=a(9194),p=a(7346),m=a(4184),d=a.n(m),h=a(4797),b=a(2800);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o,l,_x,c,n=[],_n=!0,r=!1;try{if(_x=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;_n=!1}else for(;!(_n=(o=_x.call(a)).done)&&(n.push(o.value),n.length!==t);_n=!0);}catch(e){r=!0,l=e}finally{try{if(!_n&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(r)throw l}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var f=[];for(var g in photoBlock.imageSizes){var R=photoBlock.imageSizes[g];f.push({value:g,label:R.label})}var E=(0,o.forwardRef)((function(e,t){var a,m,_=e.attributes,f=e.setAttributes,g=_.dataSource,R=_.dataImageSource,E=_.dataImageSourceCustomField,v=_.dataImageSourceAuthorMeta,S=_.dataPostType,y=_.dataPostTitle,I=_.dataPostId,C=(_.dataFallbackImage,_.dataHasFallbackImage,_.dataFallbackImageSize,_.dataScreen,k((0,o.useState)(y||!1),2)),N=C[0],x=C[1],B=k((0,o.useState)(E||!1),2),F=B[0],P=B[1],A=k((0,o.useState)(v||!1),2),M=A[0],T=A[1],w=(0,o.useContext)(h.Z),Z=(w.screen,w.setScreen),D=w.setDataMode,z=React.createElement(React.Fragment,null,React.createElement(n.BlockControls,null,React.createElement(l.ToolbarGroup,null,React.createElement(l.ToolbarButton,{icon:React.createElement(r,null),label:(0,c.__)("Exit Data Mode","photo-block"),onClick:function(){f({dataMode:!1,screen:"initial"}),D(!1),Z("initial")}},(0,c.__)("Exit Data Mode","photo-block"))))),O=function(){var e=0;return"currentPost"===g?e=wp.data.select("core/editor").getCurrentPostId():"postType"===g&&""!==I?e=I:e};return React.createElement(React.Fragment,null,z,React.createElement("div",{className:"dlx-photo-block__screen-data"},React.createElement(l.Card,null,React.createElement(l.CardHeader,{isShady:!0},(0,c.__)("Dynamic Image Data","photo-block")),React.createElement(l.CardBody,{isScrollable:!0},React.createElement("div",{className:"dlx-photo-block__data-row"},React.createElement(l.SelectControl,{label:(0,c.__)("Data Source","photo-block"),value:g,onChange:function(e){f({dataSource:e})},options:[{label:(0,c.__)("Current post","photo-block"),value:"currentPost"},{label:(0,c.__)("Post type","photo-block"),value:"postType"}]})),"postType"===g&&React.createElement(React.Fragment,null,React.createElement("div",{className:"dlx-photo-block__data-row"},React.createElement(l.SelectControl,{label:(0,c.__)("Select a Post Type","photo-block"),value:S,onChange:function(e){f({dataPostType:e})},options:photoBlock.postTypes})),React.createElement("div",{className:"dlx-photo-block__data-row"},React.createElement(b.Z,{restNonce:photoBlock.restNonce,restEndpoint:photoBlock.restUrl+"/search/types",itemIcon:React.createElement(s.Z,null),params:{postType:S},savedValue:"",placeholder:(0,c.__)("Search by ID or title","photo-block"),label:(0,c.sprintf)(/* Translators: %s: post type label. */
(0,c.__)("Select a %s","photo-block"),(a=S,m="",photoBlock.postTypes.forEach((function(e){var t;e.value===a&&(m=null!==(t=null==e?void 0:e.singular)&&void 0!==t?t:e.label)})),m)),currentSelectedSuggestion:N,onItemSelect:function(e,t){null===t&&f({dataPostId:""})}},(function(e,t,a){return e&&t.length>0?React.createElement("div",{className:"dlx-photo-block__post-suggestions"},t.map((function(e,t){var o=a===t,c=d()("photo-block__post-suggestion",{"is-selected":o});return React.createElement(l.Button,{key:t,value:e.value,role:"option","aria-selected":e.value===a,className:c,onClick:function(t){x(e.label),f({dataPostId:e.value.toString(),dataPostTitle:e.label})},icon:"post"===e.type?React.createElement(u.Z,null):React.createElement(i.Z,null),iconSize:2,iconPosition:"left"},React.createElement("span",{className:"photo-block-search-item"},React.createElement("span",{className:"photo-block-search-item-title"},e.label),React.createElement("span",{className:"photo-block-search-item-info"},e.permalink)))}))):React.createElement(React.Fragment,null)})))),React.createElement("div",{className:"dlx-photo-block__data-row"},React.createElement(l.SelectControl,{label:(0,c.__)("Image Source","photo-block"),value:R,onChange:function(e){f({dataImageSource:e})}},React.createElement("optgroup",{label:(0,c.__)("Post Options","photo-block")},React.createElement("option",{value:"featuredImage"},(0,c.__)("Featured Image","photo-block")),React.createElement("option",{value:"postMeta"},(0,c.__)("Post Meta","photo-block"))),React.createElement("optgroup",{label:(0,c.__)("Author","photo-block")},React.createElement("option",{value:"authorAvatar"},(0,c.__)("Author Avatar","photo-block")),React.createElement("option",{value:"authorMeta"},(0,c.__)("Author Meta","photo-block"))))),"postMeta"===R&&React.createElement(React.Fragment,null,React.createElement("div",{className:"dlx-photo-block__data-row"},React.createElement(b.Z,{restNonce:photoBlock.restNonce,restEndpoint:photoBlock.restUrl+"/search/custom-fields",params:{postType:S,postId:O()},savedValue:"",onItemSelect:function(e,t){f(null===t?{dataImageSourceCustomField:""}:{dataImageSourceCustomField:t})},placeholder:(0,c.__)("Search for or enter a custom field","photo-block"),label:(0,c.__)("Select a Custom Field","photo-block"),currentSelectedSuggestion:F,acceptDirectInput:!0},(function(e,t,a){return e&&t.length>0?React.createElement("div",{className:"dlx-photo-block__post-suggestions"},t.map((function(e,t){var o=a===t,c=d()("photo-block__post-suggestion",{"is-selected":o});return React.createElement(l.Button,{key:t,value:e,role:"option","aria-selected":e===a,className:c,onClick:function(t){P(e),f({dataImageSourceCustomField:e})},icon:React.createElement(p.Z,null),iconSize:2,iconPosition:"left"},React.createElement("span",{className:"photo-block-search-item"},React.createElement("span",{className:"photo-block-search-item-title no-margin"},e)))}))):React.createElement(React.Fragment,null)})))),"authorMeta"===R&&React.createElement(React.Fragment,null,React.createElement("div",{className:"dlx-photo-block__data-row"},React.createElement(b.Z,{restNonce:photoBlock.restNonce,restEndpoint:photoBlock.restUrl+"/search/author-meta",params:{postType:S,postId:O()},savedValue:"",onItemSelect:function(e,t){f(null===t?{dataImageSourceAuthorMeta:""}:{dataImageSourceAuthorMeta:t})},placeholder:(0,c.__)("Search for or enter an author meta field","photo-block"),label:(0,c.__)("Select an author meta field","photo-block"),currentSelectedSuggestion:M,acceptDirectInput:!0},(function(e,t,a){return e&&t.length>0?React.createElement("div",{className:"dlx-photo-block__post-suggestions"},t.map((function(e,t){var o=a===t,c=d()("photo-block__post-suggestion",{"is-selected":o});return React.createElement(l.Button,{key:t,value:e,role:"option","aria-selected":e===a,className:c,onClick:function(t){T(e),f({dataImageSourceAuthorMeta:e})},icon:React.createElement(p.Z,null),iconSize:2,iconPosition:"left"},React.createElement("span",{className:"photo-block-search-item"},React.createElement("span",{className:"photo-block-search-item-title no-margin"},e)))}))):React.createElement(React.Fragment,null)}))))),React.createElement(l.CardFooter,null,React.createElement("div",{className:"dlx-photo-block__data-row dlx-photo-block__data-button-apply"},React.createElement(l.BaseControl,null,React.createElement(l.Button,{variant:"primary",onClick:function(){D(!0),f({dataScreen:"data-edit"}),Z("data-edit")},disabled:function(){if("postType"===g){if(""===S)return!0;if(""===I)return!0}return"postMeta"===R&&""===E}()},(0,c.__)("Apply Changes and Preview","photo-block"))))))))}))}}]);
//# sourceMappingURL=DataScreen.0.0.1.js.map